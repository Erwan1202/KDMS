---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/common/Navbar.astro";
import Footer from "../components/common/Footer.astro";
---

<Layout
    title="Contact - KDMS"
    description="Contactez KDMS pour vos projets de flight case sur mesure, menuiserie et agencement. Devis gratuit et fabrication personnalisée."
>
    <Navbar theme="dark" />

    <main class="bg-black text-white min-h-screen">
        <section class="relative h-[50vh] min-h-[350px] overflow-hidden">
            <div class="absolute inset-0 bg-gray-700 animate-pulse">
                <div
                    class="w-full h-full flex items-center justify-center text-white/20"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="120"
                        height="120"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="0.5"
                    >
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"
                        ></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                </div>
            </div>
            <div
                class="absolute inset-0 bg-gradient-to-b from-black/30 to-black/60"
            >
            </div>
        </section>

        <section
            class="max-w-7xl mx-auto px-6 md:px-8 -mt-24 relative z-10 mb-12"
        >
            <div
                class="bg-black/90 backdrop-blur-md rounded-2xl border border-white/10 p-6 md:p-8 space-y-4 md:space-y-6 animate-info max-w-md overflow-hidden"
            >
                <div class="mb-2">
                    <h1
                        class="text-3xl md:text-4xl font-bold tracking-tight text-white"
                    >
                        Contactez-nous
                    </h1>
                </div>

                <div
                    class="flex items-center gap-4 pb-6 border-b border-white/10 animate-fade-content opacity-0"
                >
                    <div
                        class="w-16 h-16 rounded-full bg-[#525946] flex items-center justify-center"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="28"
                            height="28"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="text-white"
                        >
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                            ></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div>
                        <span
                            class="text-[#6b755a] font-bold text-sm tracking-widest uppercase block"
                            >Votre interlocuteur</span
                        >
                        <h2 class="text-3xl font-bold text-white">
                            Régis Kozak
                        </h2>
                        <p class="text-white/60 font-light text-base">
                            Dirigeant
                        </p>
                    </div>
                </div>

                <div
                    class="flex items-start gap-4 group animate-fade-content opacity-0"
                >
                    <div
                        class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center flex-shrink-0"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="text-[#6b755a]"
                        >
                            <path
                                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                            ></path>
                        </svg>
                    </div>
                    <div>
                        <span
                            class="text-white/50 text-sm uppercase tracking-wider block mb-1"
                            >Téléphone</span
                        >
                        <a
                            href="tel:+33650003101"
                            class="text-white font-medium hover:text-[#6b755a] transition-colors"
                        >
                            +33 1 69 12 72 10
                        </a>
                    </div>
                </div>

                <div
                    class="flex items-start gap-4 group animate-fade-content opacity-0"
                >
                    <div
                        class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center flex-shrink-0"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="text-[#6b755a]"
                        >
                            <path
                                d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                            ></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                        </svg>
                    </div>
                    <div>
                        <span
                            class="text-white/50 text-xs uppercase tracking-wider block mb-1"
                            >Email</span
                        >
                        <a
                            href="mailto:contact@k-dms.co"
                            class="text-white font-medium hover:text-[#6b755a] transition-colors"
                        >
                            contact@k-dms.co
                        </a>
                    </div>
                </div>

                <div
                    class="flex items-start gap-4 group animate-fade-content opacity-0"
                >
                    <div
                        class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center flex-shrink-0"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="18"
                            height="18"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="text-[#6b755a]"
                        >
                            <path
                                d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"
                            ></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                    </div>
                    <div>
                        <span
                            class="text-white/50 text-xs uppercase tracking-wider block mb-1"
                            >Adresse</span
                        >
                        <p class="text-white font-medium">
                            8 Rue Camille Décauville<br />
                            91250 Tigery, France
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section class="max-w-7xl mx-auto px-6 md:px-8 py-12">
            <div
                class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-24 items-start"
            >
                <div>
                    <h2
                        class="text-4xl md:text-5xl font-bold mb-4 animate-text opacity-0"
                    >
                        Envoyez-nous un message
                    </h2>
                    <p
                        class="text-white/60 font-light mb-8 text-lg animate-text opacity-0"
                    >
                        Nous vous répondrons dans les plus brefs délais.
                    </p>
                </div>

                <div
                    class="bg-white/10 p-6 md:p-8 rounded-2xl border border-white/20 animate-form opacity-0 h-fit shadow-[0_8px_32px_rgba(0,0,0,0.4)]"
                >
                    <form class="flex flex-col gap-5">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div class="relative group">
                                <input
                                    type="text"
                                    id="firstname"
                                    name="firstname"
                                    class="peer w-full bg-transparent border-b border-white/20 py-2 text-white placeholder-transparent focus:border-[#6b755a] focus:outline-none transition-colors"
                                    placeholder="Prénom"
                                    required
                                />
                                <label
                                    for="firstname"
                                    class="absolute left-0 -top-2.5 text-xs text-white/50 transition-all peer-placeholder-shown:text-base
                                    peer-placeholder-shown:text-white/50 peer-placeholder-shown:top-2 peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-[#6b755a]"
                                >
                                    Prénom
                                </label>
                            </div>
                            <div class="relative group">
                                <input
                                    type="text"
                                    id="lastname"
                                    name="lastname"
                                    class="peer w-full bg-transparent border-b border-white/20 py-2 text-white placeholder-transparent
                                    focus:border-[#6b755a] focus:outline-none transition-colors"
                                    placeholder="Nom"
                                    required
                                />
                                <label
                                    for="lastname"
                                    class="absolute left-0 -top-2.5 text-xs text-white/50 transition-all peer-placeholder-shown:text-base
                                    peer-placeholder-shown:text-white/50 peer-placeholder-shown:top-2 peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-[#6b755a]"
                                >
                                    Nom
                                </label>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            <div class="relative group">
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    class="peer w-full bg-transparent border-b border-white/20 py-2 text-white placeholder-transparent focus:border-[#6b755a] focus:outline-none transition-colors"
                                    placeholder="Email"
                                    required
                                />
                                <label
                                    for="email"
                                    class="absolute left-0 -top-2.5 text-xs text-white/50 transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-white/50 peer-placeholder-shown:top-2 peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-[#6b755a]"
                                >
                                    Email
                                </label>
                            </div>
                            <div class="relative group">
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    class="peer w-full bg-transparent border-b border-white/20 py-2 text-white placeholder-transparent focus:border-[#6b755a] focus:outline-none transition-colors"
                                    placeholder="Téléphone"
                                />
                                <label
                                    for="phone"
                                    class="absolute left-0 -top-2.5 text-xs text-white/50 transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-white/50 peer-placeholder-shown:top-2 peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-[#6b755a]"
                                >
                                    Téléphone
                                </label>
                            </div>
                        </div>

                        <div class="relative group">
                            <textarea
                                id="message"
                                name="message"
                                rows="3"
                                class="peer w-full bg-transparent border-b border-white/20 py-2 text-white placeholder-transparent focus:border-[#6b755a] focus:outline-none transition-colors resize-none"
                                placeholder="Message"
                                required></textarea>
                            <label
                                for="message"
                                class="absolute left-0 -top-2.5 text-xs text-white/50 transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-white/50 peer-placeholder-shown:top-2 peer-focus:-top-2.5 peer-focus:text-xs peer-focus:text-[#6b755a]"
                            >
                                Message
                            </label>
                        </div>

                        <button
                            type="submit"
                            class="mt-2 w-full group relative inline-flex items-center justify-center px-8 py-3 overflow-hidden rounded-full bg-[#525946] border border-[#6b755a] shadow-[0_6px_20px_rgba(82,89,70,0.3)] transition-all duration-300 hover:scale-[1.02] hover:shadow-[0_8px_30px_rgba(82,89,70,0.5)]"
                        >
                            <span
                                class="relative text-white font-bold text-lg tracking-wider"
                            >
                                Envoyer le message
                            </span>
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <section
            class="max-w-7xl mx-auto px-6 md:px-8 mt-12 pb-24 animate-map opacity-0"
        >
            <div
                id="map-container"
                class="w-full h-96 rounded-2xl overflow-hidden border border-white/10 shadow-lg bg-[#1a1a1a] flex items-center justify-center relative group cursor-pointer transition-all duration-500"
            >
                <div
                    class="absolute inset-0 bg-[url('https://maps.googleapis.com/maps/api/staticmap?center=48.638,2.506&zoom=13&size=600x300&maptype=roadmap&style=feature:all|element:all|saturation:-100|lightness:-100|visibility:simplified&sensor=false')] bg-cover bg-center opacity-30 grayscale
                     transition-opacity duration-500 group-hover:opacity-50"
                >
                </div>
                <button
                    id="load-map-btn"
                    class="relative z-10 bg-white/10 hover:bg-white/20 backdrop-blur-md border border-white/20 text-white px-8 py-4
                    rounded-full font-medium transition-all duration-300 hover:scale-105 flex items-center
                     gap-3 shadow-2xl group-hover:shadow-[0_0_30px_rgba(255,255,255,0.1)]"
                    aria-label="Charger la carte interactive Google Maps"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-[#6b755a]"
                    >
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"
                        ></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    Charger la carte interactive
                </button>
                <div
                    class="absolute bottom-4 text-white/30 text-xs font-light tracking-wider"
                >
                    Cliquez pour activer la carte (Google Maps)
                </div>
            </div>
        </section>

        <script>
            import { gsap } from "gsap";

            const timeline = gsap.timeline({
                defaults: { ease: "power3.out" },
            });

            timeline.from(
                ".animate-info",
                {
                    y: 30,
                    duration: 0.8,
                    ease: "power3.out",
                },
                0.2,
            );

            timeline.fromTo(
                ".animate-fade-content",
                { y: 20, opacity: 0 },
                { y: 0, opacity: 1, duration: 0.6, stagger: 0.1 },
                0.4,
            );

            timeline
                .fromTo(
                    ".animate-text",
                    { y: 30, opacity: 0 },
                    { y: 0, opacity: 1, duration: 0.8, stagger: 0.1 },
                    0.4,
                )
                .fromTo(
                    ".animate-form",
                    { x: 30, opacity: 0 },
                    { x: 0, opacity: 1, duration: 0.8 },
                    0.6,
                )
                .fromTo(
                    ".animate-map",
                    { y: 30, opacity: 0 },
                    { y: 0, opacity: 1, duration: 0.8 },
                    0.8,
                );

            const mapContainer = document.getElementById("map-container");
            const loadMapBtn = document.getElementById("load-map-btn");
            const mapHtml = `
                <iframe 
                    title="Localisation KDMS - 8 Rue Camille Décauville, 91250 Tigery"
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade" 
                    src="https://maps.google.com/maps?q=8+Rue+Camille+D%C3%A9cauville,+91250+Tigery&t=&z=15&ie=UTF8&iwloc=&output=embed"
                    class="w-full h-full animate-fade-in"
                ></iframe>
            `;

            if (mapContainer && loadMapBtn) {
                const loadMap = () => {
                    mapContainer.innerHTML = mapHtml;
                    gsap.fromTo(
                        mapContainer.querySelector("iframe"),
                        { opacity: 0 },
                        { opacity: 1, duration: 0.5 },
                    );
                };

                loadMapBtn.addEventListener("click", loadMap);
                mapContainer.addEventListener("click", loadMap);
            }
        </script>

        <style>
            input:-webkit-autofill,
            input:-webkit-autofill:hover,
            input:-webkit-autofill:focus,
            textarea:-webkit-autofill,
            textarea:-webkit-autofill:hover,
            textarea:-webkit-autofill:focus {
                -webkit-text-fill-color: white;
                -webkit-box-shadow: 0 0 0px 1000px #000 inset;
                transition: background-color 5000s ease-in-out 0s;
            }
        </style>
    </main>
    <Footer />
</Layout>
