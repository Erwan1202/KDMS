---
import { Image } from "astro:assets";
import consoleImage from "../../assets/accueil/hero-flight-case.png";

const realisations = [
    {
        title: "Meubles",
        gridClass: "md:col-span-2",
        image: consoleImage,
    },
    {
        title: "Evénementiel",
        gridClass: "md:col-span-1",
        image: consoleImage,
    },
    {
        title: "Industrie",
        gridClass: "md:col-span-1",
        image: consoleImage,
    },
    {
        title: "Spectacle",
        gridClass: "md:col-span-2",
        image: consoleImage,
    },
    {
        title: "Audiovisuel",
        gridClass: "md:col-span-2",
        image: consoleImage,
    },
    {
        title: "Pelicase",
        gridClass: "md:col-span-1",
        image: consoleImage,
    },
];
---

<section
    id="realisations"
    class="realisations-section w-full min-h-screen py-12 md:py-20 px-0 md:px-8 bg-[#0E0E0E]"
>
    <div class="w-full max-w-5xl mx-auto text-center mb-8 md:mb-12 px-6 md:px-8">
        <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-bold mb-3 md:mb-4 mt-6 md:mt-8 tracking-tight text-white">
            Nos <span class="text-[#5C8F3A]">réalisations</span>
        </h2>
        <p class="text-base sm:text-lg md:text-xl lg:text-2xl text-[#B8B8B8] font-medium">
            Découvrez la diversité de nos projets pour différents secteurs
        </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 w-full px-4 md:px-8">
        {
            realisations.map((item) => (
                <div class="realisation-card group relative w-full overflow-hidden rounded-2xl bg-[#1A1A1A] cursor-pointer h-[300px] md:h-[400px]">
                    {item.image ? (
                        <Image
                            src={item.image}
                            alt={item.title}
                            loading="lazy"
                            decoding="async"
                            widths={[600, 1200]}
                            class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-50 group-hover:opacity-30 grayscale group-hover:grayscale-0 transition-all"
                        />
                    ) : (
                        <div class="absolute inset-0 w-full h-full bg-gray-800" />
                    )}
                    
                    <div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center">
                        <h3 class="text-2xl md:text-3xl font-bold text-white tracking-tight transform transition-all duration-500 group-hover:-translate-y-2 z-10">
                            {item.title}
                        </h3>
                        
                        <!-- Precise Interaction Indicator -->
                        <div class="h-[1px] w-8 bg-[#E07A1F] mt-4 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-center"></div>
                        
                        <span class="opacity-0 translate-y-4 transition-all duration-500 group-hover:opacity-100 group-hover:translate-y-0 text-white/80 font-light text-sm mt-4 tracking-widest uppercase">
                            Explorer
                        </span>
                    </div>
                    
                    <!-- Structural Border (Green) -> Active Border (Light Green) -->
                    <div class="absolute inset-0 border border-[#5C8F3A]/30 rounded-2xl pointer-events-none transition-colors duration-300 group-hover:border-[#7FB255]/50" />
                </div>
            ))
        }
    </div>

    <div class="w-full flex justify-center mt-10 md:mt-16">
        <a
            href="/realisations"
            class="cta-button group relative inline-flex items-center justify-center px-10 sm:px-12 md:px-16 py-4 overflow-hidden rounded-full bg-[#E07A1F] transition-all duration-300 hover:bg-[#C86618] hover:shadow-[0_0_30px_rgba(224,122,31,0.4)] whitespace-nowrap no-underline"
        >
            <span class="relative text-white font-medium text-sm tracking-[0.2em] uppercase transition-colors">
                Voir toutes les réalisations
            </span>
        </a>
    </div>
</section>

<style>
    /* No custom CSS needed for this version */
</style>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    const ctaButton = document.querySelector(".cta-button");

    if (ctaButton) {
        gsap.to(ctaButton, {
            scrollTrigger: {
                trigger: ctaButton,
                start: "top 90%",
                toggleActions: "play none none reverse",
            },
            opacity: 1,
            y: 0,
            duration: 0.8,
            ease: "back.out(1.7)",
        });
    }
</script>
